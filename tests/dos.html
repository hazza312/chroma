<html style="background: rgb(15, 159, 228)"><body style="padding: 25px; margin: 25px; background: #333; font-family: monospace"><span title="comment" style="color: #fff">i386/16</span> <span title="comment" style="color: #fff">Core</span> <br><span title="comment" style="color: #fff">stack</span> <span title="macro definition" style="color: #00FFFF">nip</span> <span title="machine code" style="color: #aaaaaa">46</span> <span title="machine code" style="color: #aaaaaa">46</span> <span title="macro definition" style="color: #00FFFF">drop</span> <span title="machine code" style="color: #aaaaaa">ad</span> <span title="macro definition" style="color: #00FFFF">dup</span> <span title="machine code" style="color: #aaaaaa">4e</span> <span title="machine code" style="color: #aaaaaa">4e</span> <span title="machine code" style="color: #aaaaaa">89</span> <span title="machine code" style="color: #aaaaaa">04</span> <br><span title="comment" style="color: #fff">numeric</span> <span title="macro definition" style="color: #00FFFF">lit</span> <span title="compiled call, word, literal" style="color: #00FF7F">dup</span> <span title="machine code" style="color: #aaaaaa">b8</span> <span title="macro execution" style="color: #FFFF00">i16</span> <span title="macro definition" style="color: #00FFFF">+</span> <span title="machine code" style="color: #aaaaaa">03</span> <span title="machine code" style="color: #aaaaaa">04</span> <span title="compiled call, word, literal" style="color: #00FF7F">nip</span> <span title="macro definition" style="color: #00FFFF">-</span> <span title="machine code" style="color: #aaaaaa">93</span> <span title="machine code" style="color: #aaaaaa">ad</span> <span title="machine code" style="color: #aaaaaa">29</span> <span title="machine code" style="color: #aaaaaa">d8</span> <span title="macro definition" style="color: #00FFFF">1+</span> <span title="machine code" style="color: #aaaaaa">40</span> <span title="macro definition" style="color: #00FFFF">1-</span> <span title="machine code" style="color: #aaaaaa">48</span> <br><span title="comment" style="color: #fff">logic</span> <span title="macro definition" style="color: #00FFFF">and</span> <span title="machine code" style="color: #aaaaaa">23</span> <span title="machine code" style="color: #aaaaaa">04</span> <span title="compiled call, word, literal" style="color: #00FF7F">nip</span> <span title="macro definition" style="color: #00FFFF">or</span> <span title="machine code" style="color: #aaaaaa">0b</span> <span title="machine code" style="color: #aaaaaa">04</span> <span title="compiled call, word, literal" style="color: #00FF7F">nip</span> <span title="macro definition" style="color: #00FFFF">xor</span> <span title="machine code" style="color: #aaaaaa">33</span> <span title="machine code" style="color: #aaaaaa">04</span> <span title="compiled call, word, literal" style="color: #00FF7F">nip</span> <span title="macro definition" style="color: #00FFFF">rol</span> <span title="machine code" style="color: #aaaaaa">51</span> <span title="machine code" style="color: #aaaaaa">91</span> <span title="machine code" style="color: #aaaaaa">ad</span> <span title="machine code" style="color: #aaaaaa">d3</span> <span title="machine code" style="color: #aaaaaa">c0</span> <span title="machine code" style="color: #aaaaaa">59</span> <br><span title="comment" style="color: #fff">branch</span> <span title="macro definition" style="color: #00FFFF">jmp</span> <span title="machine code" style="color: #aaaaaa">e9</span> <span title="machine code" style="color: #aaaaaa">00</span> <span title="machine code" style="color: #aaaaaa">00</span> <span title="macro definition" style="color: #00FFFF">jnz</span> <span title="machine code" style="color: #aaaaaa">75</span> <span title="machine code" style="color: #aaaaaa">00</span> <span title="macro definition" style="color: #00FFFF">jz</span> <span title="machine code" style="color: #aaaaaa">74</span> <span title="machine code" style="color: #aaaaaa">00</span> <span title="macro definition" style="color: #00FFFF">jns</span> <span title="machine code" style="color: #aaaaaa">79</span> <span title="machine code" style="color: #aaaaaa">00</span> <span title="macro definition" style="color: #00FFFF">js</span> <span title="machine code" style="color: #aaaaaa">78</span> <span title="machine code" style="color: #aaaaaa">00</span> <span title="macro definition" style="color: #00FFFF">test</span> <span title="machine code" style="color: #aaaaaa">85</span> <span title="machine code" style="color: #aaaaaa">c0</span> <br><span title="comment" style="color: #fff">flow</span> <span title="macro definition" style="color: #00FFFF">call</span> <span title="machine code" style="color: #aaaaaa">e8</span> <span title="machine code" style="color: #aaaaaa">00</span> <span title="machine code" style="color: #aaaaaa">00</span> <span title="macro definition" style="color: #00FFFF">;</span> <span title="machine code" style="color: #aaaaaa">c3</span> <span title="macro definition" style="color: #00FFFF">hlt</span> <span title="machine code" style="color: #aaaaaa">f4</span> <br><span title="comment" style="color: #fff">memory</span> <span title="macro definition" style="color: #00FFFF">!</span> <span title="machine code" style="color: #aaaaaa">93</span> <span title="machine code" style="color: #aaaaaa">ad</span> <span title="machine code" style="color: #aaaaaa">89</span> <span title="machine code" style="color: #aaaaaa">07</span> <span title="machine code" style="color: #aaaaaa">ad</span> <span title="macro definition" style="color: #00FFFF">@</span> <span title="machine code" style="color: #aaaaaa">93</span> <span title="machine code" style="color: #aaaaaa">8b</span> <span title="machine code" style="color: #aaaaaa">07</span> <br><br><br><span title="comment" style="color: #fff">Language</span> <span title="comment" style="color: #fff">implementation</span> <br><span title="macro definition" style="color: #00FFFF">-if</span> <span title="compiled call, word, literal" style="color: #00FF7F">test</span> <span title="compiled call, word, literal" style="color: #00FF7F">jns</span> <span title="macro execution" style="color: #FFFF00">ip@</span> <span title="macro execution" style="color: #FFFF00">01</span> <span title="macro execution" style="color: #FFFF00">-</span> <span title="compiled call, word, literal" style="color: #00FF7F">drop</span> <span title="macro execution" style="color: #FFFF00">;</span> <span title="macro definition" style="color: #00FFFF">if</span> <span title="compiled call, word, literal" style="color: #00FF7F">test</span> <span title="compiled call, word, literal" style="color: #00FF7F">jz</span> <span title="macro execution" style="color: #FFFF00">ip@</span> <span title="macro execution" style="color: #FFFF00">01</span> <span title="macro execution" style="color: #FFFF00">-</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><span title="macro definition" style="color: #00FFFF">then</span> <span title="macro execution" style="color: #FFFF00">dup</span> <span title="macro execution" style="color: #FFFF00">01</span> <span title="macro execution" style="color: #FFFF00">+</span> <span title="macro execution" style="color: #FFFF00">ip@</span> <span title="macro execution" style="color: #FFFF00">swap</span> <span title="macro execution" style="color: #FFFF00">-</span> <span title="macro execution" style="color: #FFFF00">swap</span> <span title="macro execution" style="color: #FFFF00">i!</span> <span title="compiled call, word, literal" style="color: #00FF7F">drop</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><span title="macro definition" style="color: #00FFFF">for</span> <span title="machine code" style="color: #aaaaaa">51</span> <span title="machine code" style="color: #aaaaaa">91</span> <span title="compiled call, word, literal" style="color: #00FF7F">drop</span> <span title="macro execution" style="color: #FFFF00">ip@</span> <br><span title="macro definition" style="color: #00FFFF">next</span> <span title="machine code" style="color: #aaaaaa">e2</span> <span title="macro execution" style="color: #FFFF00">ip@</span> <span title="macro execution" style="color: #FFFF00">-</span> <span title="macro execution" style="color: #FFFF00">01</span> <span title="macro execution" style="color: #FFFF00">-</span> <span title="macro execution" style="color: #FFFF00">i8</span> <span title="machine code" style="color: #aaaaaa">59</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><br><br><span title="comment" style="color: #fff">i386/16/DOS</span> <span title="comment" style="color: #fff">COM</span> <span title="comment" style="color: #fff">Binary</span> <span title="comment" style="color: #fff">Format</span> <br><span title="macro execution" style="color: #FFFF00">02</span> <span title="macro execution" style="color: #FFFF00">sections</span> <span title="macro definition" style="color: #00FFFF">text</span> <span title="macro execution" style="color: #FFFF00">01</span> <span title="macro execution" style="color: #FFFF00">section</span> <span title="macro definition" style="color: #00FFFF">data</span> <span title="macro execution" style="color: #FFFF00">02</span> <span title="macro execution" style="color: #FFFF00">section</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><span title="macro execution" style="color: #FFFF00">100</span> <span title="macro execution" style="color: #FFFF00">dup</span> <span title="macro execution" style="color: #FFFF00">text</span> <span title="macro execution" style="color: #FFFF00">base</span> <span title="macro execution" style="color: #FFFF00">!</span> <span title="macro execution" style="color: #FFFF00">text</span> <span title="macro execution" style="color: #FFFF00">ptr</span> <span title="macro execution" style="color: #FFFF00">!</span> <br><span title="macro execution" style="color: #FFFF00">400</span> <span title="macro execution" style="color: #FFFF00">dup</span> <span title="macro execution" style="color: #FFFF00">data</span> <span title="macro execution" style="color: #FFFF00">base</span> <span title="macro execution" style="color: #FFFF00">!</span> <span title="macro execution" style="color: #FFFF00">data</span> <span title="macro execution" style="color: #FFFF00">ptr</span> <span title="macro execution" style="color: #FFFF00">!</span> <br><br><span title="macro definition" style="color: #00FFFF">i8</span> <span title="macro execution" style="color: #FFFF00">text</span> <span title="macro execution" style="color: #FFFF00">w8</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><span title="macro definition" style="color: #00FFFF">i16</span> <span title="macro execution" style="color: #FFFF00">text</span> <span title="macro execution" style="color: #FFFF00">w16</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><span title="macro definition" style="color: #00FFFF">ip</span> <span title="macro execution" style="color: #FFFF00">text</span> <span title="macro execution" style="color: #FFFF00">ptr</span> <span title="macro definition" style="color: #00FFFF">ip@</span> <span title="macro execution" style="color: #FFFF00">ip</span> <span title="macro execution" style="color: #FFFF00">@</span> <span title="macro definition" style="color: #00FFFF">ip!</span> <span title="macro execution" style="color: #FFFF00">ip</span> <span title="macro execution" style="color: #FFFF00">!</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><span title="macro definition" style="color: #00FFFF">dp</span> <span title="macro execution" style="color: #FFFF00">data</span> <span title="macro execution" style="color: #FFFF00">ptr</span> <span title="macro definition" style="color: #00FFFF">dp@</span> <span title="macro execution" style="color: #FFFF00">dp</span> <span title="macro execution" style="color: #FFFF00">@</span> <span title="macro definition" style="color: #00FFFF">dp!</span> <span title="macro execution" style="color: #FFFF00">dp</span> <span title="macro execution" style="color: #FFFF00">!</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><br><span title="macro definition" style="color: #00FFFF">compile</span> <span title="comment" style="color: #fff">store</span> <span title="macro execution" style="color: #FFFF00">ip@</span> <span title="comment" style="color: #fff">touchup</span> <span title="macro execution" style="color: #FFFF00">placeholder</span> <span title="macro execution" style="color: #FFFF00">ip!</span> <span title="compiled call, word, literal" style="color: #00FF7F">main</span> <span title="compiled call, word, literal" style="color: #00FF7F">;</span> <span title="comment" style="color: #fff">restore</span> <span title="macro execution" style="color: #FFFF00">ip!</span> <br><span title="comment" style="color: #fff">calculate</span> <span title="comment" style="color: #fff">padding</span> <span title="macro execution" style="color: #FFFF00">data</span> <span title="macro execution" style="color: #FFFF00">base</span> <span title="macro execution" style="color: #FFFF00">@</span> <span title="macro execution" style="color: #FFFF00">ip@</span> <span title="macro execution" style="color: #FFFF00">-</span> <span title="macro execution" style="color: #FFFF00">text</span> <span title="macro execution" style="color: #FFFF00">base</span> <span title="macro execution" style="color: #FFFF00">@</span> <span title="macro execution" style="color: #FFFF00">-</span> <br><span title="comment" style="color: #fff">make</span> <span title="comment" style="color: #fff">binary</span> <span title="macro execution" style="color: #FFFF00">text</span> <span title="macro execution" style="color: #FFFF00">write</span> <span title="macro execution" style="color: #FFFF00">padding</span> <span title="macro execution" style="color: #FFFF00">data</span> <span title="macro execution" style="color: #FFFF00">write</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><br><br><span title="comment" style="color: #fff">i386/16/DOS</span> <span title="comment" style="color: #fff">Runtime</span> <br><span title="word definition" style="color: #ff0000">init</span> <span title="comment" style="color: #fff">setup</span> <span title="comment" style="color: #fff">data</span> <span title="comment" style="color: #fff">stack</span> <span title="machine code" style="color: #aaaaaa">be</span> <span title="machine code" style="color: #aaaaaa">00</span> <span title="machine code" style="color: #aaaaaa">e8</span> <span title="word definition" style="color: #ff0000">placeholder</span> <span title="compiled call, word, literal" style="color: #00FF7F">jmp</span> <span title="comment" style="color: #fff">to</span> <span title="comment" style="color: #fff">main</span> <span title="comment" style="color: #fff">defined</span> <span title="comment" style="color: #fff">later</span> <br><span title="macro definition" style="color: #00FFFF">int21h</span> <span title="machine code" style="color: #aaaaaa">cd</span> <span title="machine code" style="color: #aaaaaa">21</span> <span title="compiled call, word, literal" style="color: #00FF7F">drop</span> <span title="macro execution" style="color: #FFFF00">;</span> <br><span title="word definition" style="color: #ff0000">emit</span> <span title="machine code" style="color: #aaaaaa">92</span> <span title="machine code" style="color: #aaaaaa">b4</span> <span title="machine code" style="color: #aaaaaa">02</span> <span title="compiled call, word, literal" style="color: #00FF7F">int21h</span> <span title="compiled call, word, literal" style="color: #00FF7F">;</span> <span title="word definition" style="color: #ff0000">space</span> <span title="compiled call, word, literal" style="color: #00FF7F">20</span> <span title="compiled call, word, literal" style="color: #00FF7F">emit</span> <span title="compiled call, word, literal" style="color: #00FF7F">;</span> <span title="word definition" style="color: #ff0000">cr</span> <span title="compiled call, word, literal" style="color: #00FF7F">0d</span> <span title="compiled call, word, literal" style="color: #00FF7F">0a</span> <span title="compiled call, word, literal" style="color: #00FF7F">emit</span> <span title="compiled call, word, literal" style="color: #00FF7F">emit</span> <span title="compiled call, word, literal" style="color: #00FF7F">;</span> <br><span title="word definition" style="color: #ff0000">puts</span> <span title="machine code" style="color: #aaaaaa">92</span> <span title="machine code" style="color: #aaaaaa">b4</span> <span title="machine code" style="color: #aaaaaa">09</span> <span title="compiled call, word, literal" style="color: #00FF7F">int21h</span> <span title="compiled call, word, literal" style="color: #00FF7F">;</span> <span title="word definition" style="color: #ff0000">hexchar</span> <span title="compiled call, word, literal" style="color: #00FF7F">dup</span> <span title="compiled call, word, literal" style="color: #00FF7F">0a</span> <span title="compiled call, word, literal" style="color: #00FF7F">-</span> <span title="compiled call, word, literal" style="color: #00FF7F">-if</span> <span title="compiled call, word, literal" style="color: #00FF7F">30</span> <span title="compiled call, word, literal" style="color: #00FF7F">+</span> <span title="compiled call, word, literal" style="color: #00FF7F">;</span> <span title="compiled call, word, literal" style="color: #00FF7F">then</span> <span title="compiled call, word, literal" style="color: #00FF7F">37</span> <span title="compiled call, word, literal" style="color: #00FF7F">+</span> <span title="compiled call, word, literal" style="color: #00FF7F">;</span> <br><span title="word definition" style="color: #ff0000">.</span> <span title="compiled call, word, literal" style="color: #00FF7F">04</span> <span title="compiled call, word, literal" style="color: #00FF7F">for</span> <span title="compiled call, word, literal" style="color: #00FF7F">04</span> <span title="compiled call, word, literal" style="color: #00FF7F">rol</span> <span title="compiled call, word, literal" style="color: #00FF7F">dup</span> <span title="compiled call, word, literal" style="color: #00FF7F">0f</span> <span title="compiled call, word, literal" style="color: #00FF7F">and</span> <span title="compiled call, word, literal" style="color: #00FF7F">hexchar</span> <span title="compiled call, word, literal" style="color: #00FF7F">emit</span> <span title="compiled call, word, literal" style="color: #00FF7F">next</span> <span title="compiled call, word, literal" style="color: #00FF7F">drop</span> <span title="compiled call, word, literal" style="color: #00FF7F">;</span> <br><br><br><span title="comment" style="color: #fff">User</span> <span title="comment" style="color: #fff">code:</span> <span title="comment" style="color: #fff">incrementally</span> <span title="comment" style="color: #fff">test</span> <span title="comment" style="color: #fff">some</span> <span title="comment" style="color: #fff">language</span> <span title="comment" style="color: #fff">features</span> <br><span title="word definition" style="color: #ff0000">main</span> <br><span title="word definition" style="color: #ff0000">test1</span> <span title="compiled call, word, literal" style="color: #00FF7F">31</span> <span title="compiled call, word, literal" style="color: #00FF7F">emit</span> <span title="compiled call, word, literal" style="color: #00FF7F">space</span> <br><span title="word definition" style="color: #ff0000">test2</span> <span title="compiled call, word, literal" style="color: #00FF7F">32</span> <span title="compiled call, word, literal" style="color: #00FF7F">02</span> <span title="compiled call, word, literal" style="color: #00FF7F">for</span> <span title="compiled call, word, literal" style="color: #00FF7F">dup</span> <span title="compiled call, word, literal" style="color: #00FF7F">emit</span> <span title="compiled call, word, literal" style="color: #00FF7F">space</span> <span title="compiled call, word, literal" style="color: #00FF7F">1+</span> <span title="compiled call, word, literal" style="color: #00FF7F">next</span> <span title="compiled call, word, literal" style="color: #00FF7F">drop</span> <br><span title="word definition" style="color: #ff0000">test3</span> <span title="compiled call, word, literal" style="color: #00FF7F">4567</span> <span title="compiled call, word, literal" style="color: #00FF7F">dup</span> <span title="compiled call, word, literal" style="color: #00FF7F">.</span> <span title="compiled call, word, literal" style="color: #00FF7F">space</span> <br><span title="word definition" style="color: #ff0000">test4</span> <span title="compiled call, word, literal" style="color: #00FF7F">02</span> <span title="compiled call, word, literal" style="color: #00FF7F">for</span> <span title="compiled call, word, literal" style="color: #00FF7F">4444</span> <span title="compiled call, word, literal" style="color: #00FF7F">+</span> <span title="compiled call, word, literal" style="color: #00FF7F">dup</span> <span title="compiled call, word, literal" style="color: #00FF7F">.</span> <span title="compiled call, word, literal" style="color: #00FF7F">space</span> <span title="compiled call, word, literal" style="color: #00FF7F">next</span> <span title="compiled call, word, literal" style="color: #00FF7F">drop</span> <span title="compiled call, word, literal" style="color: #00FF7F">cr</span> <br><span title="word definition" style="color: #ff0000">test5</span> <span title="compiled call, word, literal" style="color: #00FF7F">41</span> <span title="compiled call, word, literal" style="color: #00FF7F">0d</span> <span title="compiled call, word, literal" style="color: #00FF7F">for</span> <span title="compiled call, word, literal" style="color: #00FF7F">02</span> <span title="compiled call, word, literal" style="color: #00FF7F">for</span> <span title="compiled call, word, literal" style="color: #00FF7F">dup</span> <span title="compiled call, word, literal" style="color: #00FF7F">emit</span> <span title="compiled call, word, literal" style="color: #00FF7F">1+</span> <span title="compiled call, word, literal" style="color: #00FF7F">next</span> <span title="compiled call, word, literal" style="color: #00FF7F">next</span> <span title="compiled call, word, literal" style="color: #00FF7F">cr</span> <br><span title="word definition" style="color: #ff0000">test6</span> <span title="compiled call, word, literal" style="color: #00FF7F">fedc</span> <span title="variable declaration" style="color: #FF00FF">a</span> <span title="compiled call, word, literal" style="color: #00FF7F">!</span> <span title="compiled call, word, literal" style="color: #00FF7F">7654</span> <span title="variable declaration" style="color: #FF00FF">c</span> <span title="compiled call, word, literal" style="color: #00FF7F">!</span> <span title="compiled call, word, literal" style="color: #00FF7F">3210</span> <span title="variable declaration" style="color: #FF00FF">d</span> <span title="compiled call, word, literal" style="color: #00FF7F">!</span> <span title="compiled call, word, literal" style="color: #00FF7F">ba98</span> <span title="variable declaration" style="color: #FF00FF">b</span> <span title="compiled call, word, literal" style="color: #00FF7F">!</span> <span title="compiled call, word, literal" style="color: #00FF7F">d</span> <span title="compiled call, word, literal" style="color: #00FF7F">c</span> <span title="compiled call, word, literal" style="color: #00FF7F">b</span> <span title="compiled call, word, literal" style="color: #00FF7F">a</span> <span title="compiled call, word, literal" style="color: #00FF7F">04</span> <span title="compiled call, word, literal" style="color: #00FF7F">for</span> <span title="compiled call, word, literal" style="color: #00FF7F">@</span> <span title="compiled call, word, literal" style="color: #00FF7F">.</span> <span title="compiled call, word, literal" style="color: #00FF7F">next</span> <span title="compiled call, word, literal" style="color: #00FF7F">cr</span> <br><span title="word definition" style="color: #ff0000">test7</span> <span title="compiled call, word, literal" style="color: #00FF7F">"pizza$"</span> <span title="compiled call, word, literal" style="color: #00FF7F">puts</span> <span title="compiled call, word, literal" style="color: #00FF7F">cr</span> <br><span title="word definition" style="color: #ff0000">test8</span> <span title="compiled call, word, literal" style="color: #00FF7F">"pizza$"</span> <span title="variable declaration" style="color: #FF00FF">pizza</span> <span title="compiled call, word, literal" style="color: #00FF7F">!</span> <span title="compiled call, word, literal" style="color: #00FF7F">pizza</span> <span title="compiled call, word, literal" style="color: #00FF7F">@</span> <span title="compiled call, word, literal" style="color: #00FF7F">puts</span> <span title="compiled call, word, literal" style="color: #00FF7F">cr</span> <span title="compiled call, word, literal" style="color: #00FF7F">;</span> <br><br><br></body></html>